{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-resumable.js","webpack:///webpack/bootstrap 461b03c5d6bd6747f45c","webpack:///./node_modules/vue-loader/lib/component-normalizer.js","webpack:///src/lib/FileUpload.vue","webpack:///src/lib/InputFile.vue","webpack:///./src/lib/index.js","webpack:///./src/lib/FileUpload.vue","webpack:///./src/lib/InputFile.vue","webpack:///./src/lib/InputFile.vue?89be","webpack:///./src/utils/features.js","webpack:///./src/entity/file.js","webpack:///./src/utils/queue.js","webpack:///./src/utils/upload.js","webpack:///./src/utils/request.js","webpack:///./src/config/index.js","webpack:///./src/lib/FileUpload.vue?031f"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","type","default","options","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","h","concat","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__InputFile_vue__","__WEBPACK_IMPORTED_MODULE_1__utils_features__","__WEBPACK_IMPORTED_MODULE_2__entity_file__","__WEBPACK_IMPORTED_MODULE_3__utils_queue__","__WEBPACK_IMPORTED_MODULE_4__utils_upload__","components","InputFile","props","inputId","String","requestType","capture","multiple","Boolean","accept","directory","postAction","headers","data","timeout","Number","progress","promptly","thread","chunkSize","maxRetries","carryTypeName","carryFileNameName","carryRelativePathName","carryChunkSizeName","carryCurrentChunkSizeName","carryTotalSizeName","carryChunkIndexName","carryTotalChunksName","carryIdentifierName","files","features","uploading","watch","newFileList","length","upload","methods","addInputFile","el","file","push","$emit","clear","_generateUploader","action","method","chunk","_getUploaderList","_self","uploaderList","forEach","enableChunk","then","list","console","log","change","e","$destroy","$parent","target","constructor","$el","value","__WEBPACK_IMPORTED_MODULE_0__FileUpload__","VueResumable","install","Vue","component","window","use","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4596ff92_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__","normalizeComponent","Component","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__","_vm","_h","$createElement","_c","attrs","id","webkitdirectory","html5","on","esExports","input","document","createElement","FormData","drop","ondrop","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","descriptor","writable","key","protoProps","staticProps","File","size","relativePath","webkitRelativePath","lastModified","identifier","guid","uploadPercent","retries","test","url","getObjectURL","undefined","createObjectURL","URL","webkitURL","replace","r","Math","random","toString","Queue","_this","recursive","Promise","resolve","_getNotStartUploader","send","catch","count","_getUploadingList","uploader","__WEBPACK_IMPORTED_MODULE_0__request__","__WEBPACK_IMPORTED_MODULE_1__config__","Uploader","carryParamName","typeName","fileNameName","relativePathName","chunkSizeName","currentChunkSizeName","totalSizeName","chunkIndexName","totalChunksName","identifierName","currentChunkSize","chunkIndex","totalChunks","_chunkUploadSend","_entiretyUpload","formData","keys","append","requestOptions","event","lengthComputable","round","loaded","total","sendUpload","xhr","params","assign","_getCommonArguments","query","fr","FileReader","onload","result","readAsDataURL","_setBodyFields","blob","index","start","end","_this2","num","_filterChunkList","floor","chunks","_blob","slice","startOffset","_createChunkOptions","_this3","_setFileUploadResult","_sendChunk","state","_this4","newChunkList","threadCount","_createChunks","_sendChunkQueue","_generateAction","queryArray","encodeURIComponent","join","match","reject","XMLHttpRequest","addEventListener","doneHandler","status","open","setRequestHeader","ERROR","NOT_START","UPLOADING","SUCCESS","staticClass","_t","_v"],"mappings":"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","file":"vue-resumable.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"VueResumable\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueResumable\"] = factory();\n\telse\n\t\troot[\"VueResumable\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"VueResumable\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueResumable\"] = factory();\n\telse\n\t\troot[\"VueResumable\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__InputFile_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_features__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__entity_file__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_queue__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_upload__ = __webpack_require__(10);\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'vue-resumable',\n\n  components: {\n    InputFile: __WEBPACK_IMPORTED_MODULE_0__InputFile_vue__[\"a\" /* default */]\n  },\n  props: {\n    inputId: {\n      type: String\n    },\n    name: {\n      type: String,\n      default: 'file'\n    },\n    requestType: {\n      type: String,\n      default: 'octet'\n    },\n    capture: {},\n    multiple: {\n      type: Boolean\n    },\n    accept: {\n      type: String\n    },\n    directory: {\n      type: Boolean\n    },\n    postAction: {\n      type: String\n    },\n    headers: {\n      type: Object,\n      default: Object\n    },\n    data: {\n      type: Object,\n      default: Object\n    },\n    timeout: {\n      type: Number,\n      default: 0\n    },\n    progress: {\n      type: Boolean,\n      default: true\n    },\n    // 是否对新增队列的文件 立即上传\n    promptly: {\n      type: Boolean,\n      default: false\n    },\n    // 上传进程数\n    thread: {\n      type: Number,\n      default: 1\n    },\n    // 分块大小 单位 0为不开启\n    chunkSize: {\n      type: Number,\n      default: 0\n    },\n    // 上传失败或遇到异常 重试次数\n    maxRetries: {\n      type: Number,\n      default: 3\n    },\n    // 同步发送给服务端的参数\n    carryTypeName: { type: String, default: 'resumableType' },\n    carryFileNameName: { type: String, default: 'resumableFilename' },\n    carryRelativePathName: { type: String, default: 'resumableRelativePath' },\n    carryChunkSizeName: { type: String, default: 'resumableChunkSize' },\n    carryCurrentChunkSizeName: { type: String, default: 'resumableCurrentChunkSize' },\n    carryTotalSizeName: { type: String, default: 'resumableTotalSize' },\n    carryChunkIndexName: { type: String, default: 'resumableChunkNumber' },\n    carryTotalChunksName: { type: String, default: 'resumableTotalChunks' },\n    carryIdentifierName: { type: String, default: 'resumableIdentifier' }\n  },\n  data: function data() {\n    return {\n      files: [],\n      features: __WEBPACK_IMPORTED_MODULE_1__utils_features__[\"a\" /* default */],\n      uploading: 0\n    };\n  },\n\n  watch: {\n    files: function files() {\n      if (!this.promptly) {\n        return;\n      }\n      var newFileList = this.newFileList();\n      if (newFileList.length) {\n        this.upload();\n      }\n    }\n  },\n  methods: {\n    /**\n     * file input change event\n     * @param file\n     */\n    addInputFile: function addInputFile(el) {\n      if (el.files && el.files.length) {\n        for (var i = 0; i < el.files.length; i++) {\n          var file = el.files[i];\n          this.files.push(new __WEBPACK_IMPORTED_MODULE_2__entity_file__[\"a\" /* default */](file, this.maxRetries));\n        }\n      }\n      this.$emit('change', this.files);\n    },\n    clear: function clear() {\n      this.files = [];\n    },\n    _generateUploader: function _generateUploader(file) {\n      return new __WEBPACK_IMPORTED_MODULE_4__utils_upload__[\"a\" /* default */]({\n        action: this.postAction,\n        method: 'POST',\n        headers: this.headers,\n        data: this.data,\n        file: file,\n        progress: this.progress,\n        requestType: this.requestType,\n        chunk: {\n          thread: this.thread,\n          chunkSize: this.chunkSize,\n          carryChunkSizeName: this.carryChunkSizeName,\n          carryCurrentChunkSizeName: this.carryCurrentChunkSizeName,\n          carryTotalSizeName: this.carryTotalSizeName,\n          carryChunkIndexName: this.carryChunkIndexName,\n          carryTotalChunksName: this.carryTotalChunksName,\n          carryIdentifierName: this.carryIdentifierName\n        },\n        carryTypeName: this.carryTypeName,\n        carryFileNameName: this.carryFileNameName,\n        carryRelativePathName: this.carryRelativePathName\n      });\n    },\n    _getUploaderList: function _getUploaderList() {\n      var _self = this;\n      var uploaderList = [];\n      this.files.forEach(function (file) {\n        if (!file.uploading) {\n          uploaderList.push(_self._generateUploader(file));\n        }\n      });\n      return uploaderList;\n    },\n    upload: function upload() {\n      return new __WEBPACK_IMPORTED_MODULE_3__utils_queue__[\"a\" /* default */]({\n        thread: this.thread,\n        uploaderList: this._getUploaderList(),\n        enableChunk: this.chunkSize\n      }).then(function (list) {\n        console.log(list);\n      });\n    }\n  }\n});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  methods: {\n    change: function change(e) {\n      this.$destroy();\n      this.$parent.addInputFile(e.target);\n      // eslint-disable-next-line\n      new this.constructor({\n        parent: this.$parent,\n        el: this.$el\n      });\n    }\n  }\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__FileUpload__ = __webpack_require__(4);\n\n\nvar VueResumable = {\n  install: function install(Vue, options) {\n    Vue.component(__WEBPACK_IMPORTED_MODULE_0__FileUpload__[\"a\" /* default */].name, __WEBPACK_IMPORTED_MODULE_0__FileUpload__[\"a\" /* default */]);\n  }\n};\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VueResumable);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (VueResumable);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__ = __webpack_require__(1);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4596ff92_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__ = __webpack_require__(13);\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4596ff92_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__ = __webpack_require__(2);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__ = __webpack_require__(6);\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"file\",\"name\":_vm.$parent.name,\"id\":_vm.$parent.inputId || _vm.$parent.name,\"accept\":_vm.$parent.accept,\"capture\":_vm.$parent.capture,\"webkitdirectory\":_vm.$parent.directory && _vm.$parent.features.directory,\"directory\":_vm.$parent.directory && _vm.$parent.features.directory,\"multiple\":_vm.$parent.multiple && _vm.$parent.features.html5},on:{\"change\":_vm.change}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (new function () {\n  var input = document.createElement('input');\n  input.type = 'file';\n  input.multiple = true;\n\n  var features = {};\n  features.html5 = window.FormData && input.files && true;\n\n  if (features.html5) {\n    features.directory = typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean';\n    features.drop = typeof input.ondrop !== 'undefined';\n  }\n\n  return features;\n}());\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar File = function () {\n  function File(file, maxRetries) {\n    _classCallCheck(this, File);\n\n    this.file = file;\n    this.name = file.name;\n    this.size = file.size;\n    this.type = file.type;\n    this.relativePath = file.webkitRelativePath || file.relativePath || '';\n    this.lastModified = file.lastModified;\n    this.identifier = this.guid();\n    this.uploadPercent = 0;\n    this.uploading = 0; // -1:上传失败 0:未上传 1:上传中 2:上传成功\n    this.retries = maxRetries || 1;\n    this.maxRetries = maxRetries || 1;\n\n    if (/^image\\/*/.test(file.type)) {\n      this.url = this.getObjectURL(file);\n    }\n  }\n\n  _createClass(File, [{\n    key: 'getObjectURL',\n    value: function getObjectURL(file) {\n      var url = null;\n      if (window.createObjectURL !== undefined) {\n        url = window.createObjectURL(file);\n      } else if (window.URL !== undefined) {\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL !== undefined) {\n        url = window.webkitURL.createObjectURL(file);\n      }\n      return url;\n    }\n  }, {\n    key: 'guid',\n    value: function guid() {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0,\n            v = c === 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    }\n  }]);\n\n  return File;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (File);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Queue = function () {\n  function Queue(options) {\n    var _this = this;\n\n    _classCallCheck(this, Queue);\n\n    this.thread = options.thread;\n    this.uploaderList = options.uploaderList;\n    this.enableChunk = options.enableChunk;\n\n    var _recursive2 = null;\n    var list = null;\n    return new Promise(function (resolve) {\n      if (_this.enableChunk) {\n        _recursive2 = function recursive() {\n          list = _this._getNotStartUploader();\n          if (list.length) {\n            list[0].send().then(function () {\n              return _recursive2();\n            }).catch(function () {\n              return _recursive2();\n            });\n          } else {\n            resolve(_this.uploaderList);\n          }\n        };\n      } else {\n        _recursive2 = function _recursive() {\n          list = _this._getNotStartUploader();\n          if (list.length) {\n            var count = _this.thread > list.length ? list.length : _this.thread;\n            for (var i = 0; i < count - _this._getUploadingList(); i++) {\n              list[i].send().then(function () {\n                return _recursive2();\n              }).catch(function () {\n                return _recursive2();\n              });\n            }\n          } else {\n            resolve(_this.uploaderList);\n          }\n        };\n      }\n      _recursive2();\n    });\n  }\n\n  /**\n   * 未启动的上传\n   * @returns {Array}\n   * @private\n   */\n\n\n  _createClass(Queue, [{\n    key: \"_getNotStartUploader\",\n    value: function _getNotStartUploader() {\n      var uploaderList = [];\n      this.uploaderList.forEach(function (uploader) {\n        if (!uploader.file.uploading) {\n          uploaderList.push(uploader);\n        }\n      });\n      return uploaderList;\n    }\n\n    /**\n     * 上传中的列表\n     * @returns {Array}\n     * @private\n     */\n\n  }, {\n    key: \"_getUploadingList\",\n    value: function _getUploadingList() {\n      var uploaderList = [];\n      this.uploaderList.forEach(function (uploader) {\n        if (uploader.file.uploading === 1) {\n          uploaderList.push(uploader);\n        }\n      });\n      return uploaderList;\n    }\n  }]);\n\n  return Queue;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Queue);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__(12);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Uploader = function () {\n  function Uploader(options) {\n    _classCallCheck(this, Uploader);\n\n    this.action = options.action;\n    this.method = options.method;\n    this.headers = options.headers;\n    this.data = options.data;\n    this.file = options.file;\n    this.progress = options.progress;\n    this.requestType = options.requestType;\n\n    this.thread = options.chunk.thread;\n    this.chunkSize = options.chunk.chunkSize * 1024;\n\n    // 携带参数KEY\n    this.carryParamName = {\n      typeName: options.carryTypeName,\n      fileNameName: options.carryFileNameName,\n      relativePathName: options.carryRelativePathName,\n      chunkSizeName: options.chunk.carryChunkSizeName,\n      currentChunkSizeName: options.chunk.carryCurrentChunkSizeName,\n      totalSizeName: options.chunk.carryTotalSizeName,\n      chunkIndexName: options.chunk.carryChunkIndexName,\n      totalChunksName: options.chunk.carryTotalChunksName,\n      identifierName: options.chunk.carryIdentifierName\n    };\n  }\n\n  /**\n   * 返回公共参数\n   * @param totalSize 文件总大小\n   * @param chunkSize 分块大小\n   * @param currentChunkSize  当前分块大小\n   * @param chunkIndex  当前分块index\n   * @param totalChunks 分块总量\n   * @param identifier  文件唯一标识\n   * @private\n   */\n\n\n  _createClass(Uploader, [{\n    key: '_getCommonArguments',\n    value: function _getCommonArguments(options) {\n      var data = {};\n      data[this.carryParamName.typeName] = this.file.type;\n      data[this.carryParamName.fileNameName] = this.file.name;\n      data[this.carryParamName.relativePathName] = this.file.relativePath;\n      data[this.carryParamName.totalSizeName] = this.file.size;\n      data[this.carryParamName.chunkSizeName] = options.chunkSize;\n      data[this.carryParamName.currentChunkSizeName] = options.currentChunkSize;\n      data[this.carryParamName.chunkIndexName] = options.chunkIndex;\n      data[this.carryParamName.totalChunksName] = options.totalChunks;\n      data[this.carryParamName.identifierName] = this.file.identifier;\n      return data;\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      if (this.file.uploading) {\n        return;\n      }\n      // 分块上传\n      if (this.chunkSize && this.file.size > this.chunkSize) {\n        return this._chunkUploadSend();\n      }\n      return this._entiretyUpload();\n    }\n  }, {\n    key: '_setBodyFields',\n    value: function _setBodyFields(formData, data) {\n      Object.keys(data).forEach(function (key) {\n        return formData.append(key, data[key]);\n      });\n      return formData;\n    }\n\n    /**\n     * 整体上传\n     * @returns {Promise<T>}\n     * @private\n     */\n\n  }, {\n    key: '_entiretyUpload',\n    value: function _entiretyUpload() {\n      var _this = this;\n\n      var options = this.requestOptions;\n      if (this.progress) {\n        options.progress = function (event) {\n          if (event.lengthComputable) {\n            _this.file.uploadPercent = Math.round(event.loaded * 100 / event.total);\n          } else {\n            _this.file.uploadPercent = 0;\n          }\n        };\n      }\n\n      var sendUpload = function sendUpload() {\n        _this.file.uploading = 1;\n        return Object(__WEBPACK_IMPORTED_MODULE_0__request__[\"a\" /* default */])(options).then(function (xhr, event) {\n          _this.file.uploading = 2;\n          _this.file.xhr = xhr;\n          _this.file.event = event;\n          return _this.file;\n        }).catch(function (event) {\n          if (_this.file.retries) {\n            --_this.file.retries;\n            _this.file.uploading = 0;\n            _this.send();\n          } else {\n            _this.file.event = event;\n            _this.file.uploading = -1;\n            return _this.file;\n          }\n        });\n      };\n\n      var params = Object.assign({},\n      // 非分块上传时,公共参数 块大小,当前块大小都是文件大小,config:1,总块数:1\n      this._getCommonArguments({\n        chunkSize: this.file.size,\n        currentChunkSize: this.file.size,\n        chunkIndex: 1,\n        totalChunks: 1\n      }), this.data);\n\n      if (this.requestType === 'octet') {\n        options.query = params;\n        return new Promise(function (resolve) {\n          var fr = new FileReader();\n          fr.onload = function () {\n            options.data = fr.result;\n            resolve(sendUpload());\n          };\n          fr.readAsDataURL(_this.file.file);\n        });\n      } else {\n        params[this.file.name] = this.file.file;\n        options.data = this._setBodyFields(new FormData(), params);\n        return sendUpload();\n      }\n    }\n  }, {\n    key: '_createChunkOptions',\n    value: function _createChunkOptions(blob, index, start, end) {\n      var _this2 = this;\n\n      var options = Object.assign({}, this.requestOptions);\n      if (this.progress) {\n        options.progress = function (event) {\n          if (event.lengthComputable) {\n            var num = _this2._filterChunkList(__WEBPACK_IMPORTED_MODULE_1__config__[\"c\" /* SUCCESS */]).length;\n            _this2.file.uploadPercent = Math.floor(100 / _this2.chunks.length * num) + Math.floor(event.loaded * 100 / _this2.file.size);\n          }\n        };\n      }\n\n      var params = Object.assign(this._getCommonArguments({\n        chunkSize: this.chunkSize,\n        currentChunkSize: blob.size,\n        chunkIndex: index + 1,\n        totalChunks: 1\n      }), this.data, {\n        start: start,\n        end: end\n      });\n\n      if (this.requestType === 'octet') {\n        options.query = params;\n        options.data = blob;\n      } else {\n        params[this.file.name] = blob;\n        options.data = this._setBodyFields(new FormData(), params);\n      }\n\n      return options;\n    }\n  }, {\n    key: '_createChunks',\n    value: function _createChunks() {\n      this.chunks = [];\n\n      var index = 0;\n      var start = 0;\n      var end = this.chunkSize;\n\n      while (start < this.file.size) {\n        var _blob = this.file.file.slice(start, end);\n        var chunk = {\n          index: index,\n          blob: _blob,\n          startOffset: start,\n          uploading: __WEBPACK_IMPORTED_MODULE_1__config__[\"b\" /* NOT_START */],\n          retries: this.file.maxRetries\n        };\n\n        chunk.options = this._createChunkOptions(chunk.blob, index, start, end);\n        this.chunks.push(chunk);\n        index++;\n        start = end;\n        end = start + this.chunkSize;\n      }\n      var _self = this;\n      this.chunks.forEach(function (chunk) {\n        chunk.total = index;\n        if (_self.requestType === 'octet') {\n          chunk.options.query[_self.carryParamName.totalChunksName] = index;\n        } else {\n          chunk.options.data.append(_self.carryParamName.totalChunksName, index);\n        }\n      });\n    }\n  }, {\n    key: '_setFileUploadResult',\n    value: function _setFileUploadResult(chunk, event, xhr) {\n      if (!this.file.chunk) {\n        this.file.chunk = { xhr: {}, event: {} };\n      }\n      if (xhr) {\n        this.file.chunk.xhr[chunk.index] = xhr;\n      }\n      if (event) {\n        this.file.chunk.event[chunk.index] = event;\n      }\n      if (Object.keys(this.file.chunk.xhr).length === chunk.total) {\n        this.file.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"c\" /* SUCCESS */];\n      }\n    }\n  }, {\n    key: '_sendChunk',\n    value: function _sendChunk(chunk) {\n      var _this3 = this;\n\n      if (chunk.uploading) {\n        return;\n      }\n      chunk.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"d\" /* UPLOADING */];\n      return Object(__WEBPACK_IMPORTED_MODULE_0__request__[\"a\" /* default */])(chunk.options).then(function (xhr, event) {\n        chunk.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"c\" /* SUCCESS */];\n\n        _this3._setFileUploadResult(chunk, event, xhr);\n      }).catch(function (event) {\n        if (chunk.retries) {\n          --chunk.retries;\n          chunk.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"b\" /* NOT_START */];\n          _this3._sendChunk(chunk);\n        } else {\n          chunk.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* ERROR */];\n          _this3.file.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* ERROR */];\n          _this3.file.uploadPercent = 0;\n          _this3._setFileUploadResult(chunk, event);\n        }\n      });\n    }\n\n    /**\n     * 过滤chunk返回对应列表\n     * @param state 对应chunk对象的uploading字段\n     * @returns {Array}\n     * @private\n     */\n\n  }, {\n    key: '_filterChunkList',\n    value: function _filterChunkList(state) {\n      var list = [];\n      // 查询未上传的chunk时检查文件有没有被标记为失败\n      if (state === 0 && this.file.uploading < 0) {\n        return list;\n      }\n      this.chunks.forEach(function (chunk) {\n        if (chunk.uploading === state) {\n          list.push(chunk);\n        }\n      });\n      return list;\n    }\n  }, {\n    key: '_sendChunkQueue',\n    value: function _sendChunkQueue() {\n      var _this4 = this;\n\n      return new Promise(function (resolve) {\n        var recursive = function recursive() {\n          var newChunkList = _this4._filterChunkList(__WEBPACK_IMPORTED_MODULE_1__config__[\"b\" /* NOT_START */]);\n          if (!newChunkList.length) {\n            resolve(_this4.file);\n            return;\n          }\n          var threadCount = newChunkList.length > _this4.thread ? _this4.thread : newChunkList.length;\n          threadCount -= _this4._filterChunkList(__WEBPACK_IMPORTED_MODULE_1__config__[\"d\" /* UPLOADING */]);\n          if (threadCount <= 0) {\n            return;\n          }\n          for (var i = 0; i < threadCount; i++) {\n            _this4._sendChunk(newChunkList[i]).then(function () {\n              var num = _this4._filterChunkList(__WEBPACK_IMPORTED_MODULE_1__config__[\"c\" /* SUCCESS */]).length;\n              if (num === _this4.chunks.length) {\n                _this4.file.uploadPercent = 100;\n                return;\n              }\n              _this4.file.uploadPercent = Math.floor(100 / _this4.chunks.length * num);\n              recursive();\n            }).catch(function () {\n              return recursive();\n            });\n          }\n        };\n        recursive();\n      });\n    }\n  }, {\n    key: '_chunkUploadSend',\n    value: function _chunkUploadSend() {\n      this._createChunks();\n      this.file.uploading = __WEBPACK_IMPORTED_MODULE_1__config__[\"d\" /* UPLOADING */];\n      return this._sendChunkQueue();\n    }\n  }, {\n    key: 'requestOptions',\n    get: function get() {\n      return {\n        action: this.action,\n        method: this.method,\n        headers: this.headers\n      };\n    }\n  }]);\n\n  return Uploader;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Uploader);\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _generateAction = function _generateAction(action, query) {\n  if (query) {\n    var queryArray = [];\n    Object.keys(query).forEach(function (key) {\n      queryArray.push([encodeURIComponent(key), encodeURIComponent(query[key])].join('='));\n    });\n    if (queryArray.length) {\n      action += action.match('\\\\?') ? '&' : '?' + queryArray.join('&');\n    }\n  }\n  return action;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (options) {\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n    var action = options.query ? _generateAction(options.action, options.query) : options.action;\n\n    if (options.progress) {\n      xhr.upload.addEventListener('progress', options.progress, false);\n    }\n\n    var doneHandler = function doneHandler(event) {\n      xhr.status >= 200 && xhr.status < 300 ? resolve(xhr, event) : reject(event);\n    };\n\n    xhr.addEventListener('load', doneHandler, false);\n    xhr.addEventListener('error', doneHandler, false);\n    xhr.addEventListener('abort', doneHandler, false);\n    xhr.addEventListener('timeout', doneHandler, false);\n\n    xhr.open(options.method, action);\n\n    Object.keys(options.headers).forEach(function (key) {\n      return xhr.setRequestHeader(key, options.headers[key]);\n    });\n    xhr.send(options.data);\n  });\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ERROR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return NOT_START; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return UPLOADING; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return SUCCESS; });\n/**\n * 上传出错\n * @type {number}\n */\nvar ERROR = -1;\n/**\n * 未开始上传\n * @type {number}\n */\nvar NOT_START = 0;\n/**\n * 上传中\n * @type {number}\n */\nvar UPLOADING = 1;\n/**\n * 上传成功\n * @type {number}\n */\nvar SUCCESS = 2;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"className\"},[_vm._t(\"default\"),_vm._v(\" \"),_c('input-file')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vue-resumable.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 461b03c5d6bd6747f45c","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/component-normalizer.js\n// module id = 0\n// module chunks = 0","<template>\n  <label class=\"className\">\n    <slot></slot>\n    <input-file></input-file>\n  </label>\n</template>\n<script>\n  import InputFile from './InputFile.vue'\n  import features from '../utils/features'\n  import File from '../entity/file'\n  import Queue from '../utils/queue'\n  import Upload from '../utils/upload'\n\n  export default {\n    name: 'vue-resumable',\n\n    components: {\n      InputFile,\n    },\n    props: {\n      inputId: {\n        type: String,\n      },\n      name: {\n        type: String,\n        default: 'file',\n      },\n      requestType: {\n        type: String,\n        default: 'octet',\n      },\n      capture: {},\n      multiple: {\n        type: Boolean,\n      },\n      accept: {\n        type: String,\n      },\n      directory: {\n        type: Boolean,\n      },\n      postAction: {\n        type: String,\n      },\n      headers: {\n        type: Object,\n        default: Object,\n      },\n      data: {\n        type: Object,\n        default: Object,\n      },\n      timeout: {\n        type: Number,\n        default: 0,\n      },\n      progress: {\n        type: Boolean,\n        default: true,\n      },\n      // 是否对新增队列的文件 立即上传\n      promptly: {\n        type: Boolean,\n        default: false,\n      },\n      // 上传进程数\n      thread: {\n        type: Number,\n        default: 1,\n      },\n      // 分块大小 单位 0为不开启\n      chunkSize: {\n        type: Number,\n        default: 0\n      },\n      // 上传失败或遇到异常 重试次数\n      maxRetries: {\n        type: Number,\n        default: 3\n      },\n      // 同步发送给服务端的参数\n      carryTypeName: {type: String, default: 'resumableType'},\n      carryFileNameName: {type: String, default: 'resumableFilename'},\n      carryRelativePathName: {type: String, default: 'resumableRelativePath'},\n      carryChunkSizeName: {type: String, default: 'resumableChunkSize'},\n      carryCurrentChunkSizeName: {type: String, default: 'resumableCurrentChunkSize'},\n      carryTotalSizeName: {type: String, default: 'resumableTotalSize'},\n      carryChunkIndexName: {type: String, default: 'resumableChunkNumber'},\n      carryTotalChunksName: {type: String, default: 'resumableTotalChunks'},\n      carryIdentifierName: {type: String, default: 'resumableIdentifier'},\n    },\n    data() {\n      return {\n        files: [],\n        features: features,\n        uploading: 0\n      }\n    },\n    watch: {\n      files: function () {\n        if (!this.promptly) {\n          return\n        }\n        let newFileList = this.newFileList()\n        if (newFileList.length) {\n          this.upload()\n        }\n      }\n    },\n    methods: {\n      /**\n       * file input change event\n       * @param file\n       */\n      addInputFile: function (el) {\n        if (el.files && el.files.length) {\n          for (let i = 0; i < el.files.length; i++) {\n            let file = el.files[i]\n            this.files.push(new File(file, this.maxRetries))\n          }\n        }\n        this.$emit('change', this.files)\n      },\n      clear: function () {\n        this.files = []\n      },\n      _generateUploader: function (file) {\n        return new Upload({\n          action: this.postAction,\n          method: 'POST',\n          headers: this.headers,\n          data: this.data,\n          file: file,\n          progress:this.progress,\n          requestType: this.requestType,\n          chunk: {\n            thread: this.thread,\n            chunkSize: this.chunkSize,\n            carryChunkSizeName: this.carryChunkSizeName,\n            carryCurrentChunkSizeName: this.carryCurrentChunkSizeName,\n            carryTotalSizeName: this.carryTotalSizeName,\n            carryChunkIndexName: this.carryChunkIndexName,\n            carryTotalChunksName: this.carryTotalChunksName,\n            carryIdentifierName: this.carryIdentifierName\n          },\n          carryTypeName: this.carryTypeName,\n          carryFileNameName: this.carryFileNameName,\n          carryRelativePathName: this.carryRelativePathName\n        })\n      },\n      _getUploaderList: function () {\n        let _self = this\n        let uploaderList = []\n        this.files.forEach(file => {\n          if (!file.uploading) {\n            uploaderList.push(_self._generateUploader(file))\n          }\n        })\n        return uploaderList\n      },\n      upload: function () {\n        return new Queue({\n          thread: this.thread,\n          uploaderList: this._getUploaderList(),\n          enableChunk: this.chunkSize\n        }).then(list => {\n          console.log(list)\n        })\n      }\n    }\n  }\n</script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/lib/FileUpload.vue","<template>\n  <input\n    type=\"file\"\n    :name=\"$parent.name\"\n    :id=\"$parent.inputId || $parent.name\"\n    :accept=\"$parent.accept\"\n    :capture=\"$parent.capture\"\n    @change=\"change\"\n    :webkitdirectory=\"$parent.directory && $parent.features.directory\"\n    :directory=\"$parent.directory && $parent.features.directory\"\n    :multiple=\"$parent.multiple && $parent.features.html5\"\n  />\n</template>\n<script>\n  export default {\n    methods: {\n      change(e) {\n        this.$destroy()\n        this.$parent.addInputFile(e.target)\n        // eslint-disable-next-line\n        new this.constructor({\n          parent: this.$parent,\n          el: this.$el,\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/lib/InputFile.vue","import FileUpload from './FileUpload'\n\nconst VueResumable = {\n  install(Vue, options) {\n    Vue.component(FileUpload.name, FileUpload)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VueResumable)\n}\n\nexport default VueResumable\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4596ff92\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FileUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/FileUpload.vue\n// module id = 4\n// module chunks = 0","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-648e085f\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./InputFile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/InputFile.vue\n// module id = 5\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"file\",\"name\":_vm.$parent.name,\"id\":_vm.$parent.inputId || _vm.$parent.name,\"accept\":_vm.$parent.accept,\"capture\":_vm.$parent.capture,\"webkitdirectory\":_vm.$parent.directory && _vm.$parent.features.directory,\"directory\":_vm.$parent.directory && _vm.$parent.features.directory,\"multiple\":_vm.$parent.multiple && _vm.$parent.features.html5},on:{\"change\":_vm.change}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-648e085f\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/lib/InputFile.vue\n// module id = 6\n// module chunks = 0","export default new function () {\n  let input = document.createElement('input')\n  input.type = 'file'\n  input.multiple = true\n\n  let features = {}\n  features.html5 = window.FormData && input.files && true\n\n  if (features.html5) {\n    features.directory = typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean'\n    features.drop = typeof input.ondrop !== 'undefined'\n  }\n\n  return features\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/features.js","export default class File {\n  constructor(file, maxRetries) {\n    this.file = file\n    this.name = file.name\n    this.size = file.size\n    this.type = file.type\n    this.relativePath = file.webkitRelativePath || file.relativePath || ''\n    this.lastModified = file.lastModified\n    this.identifier = this.guid()\n    this.uploadPercent = 0\n    this.uploading = 0 // -1:上传失败 0:未上传 1:上传中 2:上传成功\n    this.retries = maxRetries || 1\n    this.maxRetries = maxRetries || 1\n\n    if (/^image\\/*/.test(file.type)) {\n      this.url = this.getObjectURL(file)\n    }\n  }\n\n  getObjectURL(file) {\n    let url = null\n    if (window.createObjectURL !== undefined) {\n      url = window.createObjectURL(file)\n    } else if (window.URL !== undefined) {\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL !== undefined) {\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n  guid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      let r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16)\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/file.js","export default class Queue {\n  constructor(options) {\n    this.thread = options.thread\n    this.uploaderList = options.uploaderList\n    this.enableChunk = options.enableChunk\n\n    let recursive = null\n    let list = null\n    return new Promise(resolve => {\n      if (this.enableChunk) {\n        recursive = () => {\n          list = this._getNotStartUploader()\n          if (list.length) {\n            list[0].send().then(() => recursive()).catch(() => recursive())\n          } else {\n            resolve(this.uploaderList)\n          }\n        }\n      } else {\n        recursive = () => {\n          list = this._getNotStartUploader()\n          if (list.length) {\n            let count = this.thread > list.length ? list.length : this.thread\n            for (let i = 0; i < count - this._getUploadingList(); i++) {\n              list[i].send().then(() => recursive()).catch(() => recursive())\n            }\n          } else {\n            resolve(this.uploaderList)\n          }\n        }\n      }\n      recursive()\n    })\n  }\n\n  /**\n   * 未启动的上传\n   * @returns {Array}\n   * @private\n   */\n  _getNotStartUploader() {\n    let uploaderList = []\n    this.uploaderList.forEach(uploader => {\n      if (!uploader.file.uploading) {\n        uploaderList.push(uploader)\n      }\n    })\n    return uploaderList\n  }\n\n  /**\n   * 上传中的列表\n   * @returns {Array}\n   * @private\n   */\n  _getUploadingList() {\n    let uploaderList = []\n    this.uploaderList.forEach(uploader => {\n      if (uploader.file.uploading === 1) {\n        uploaderList.push(uploader)\n      }\n    })\n    return uploaderList\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/queue.js","import request from './request'\nimport * as status from '../config'\n\nexport default class Uploader {\n  constructor(options) {\n    this.action = options.action\n    this.method = options.method\n    this.headers = options.headers\n    this.data = options.data\n    this.file = options.file\n    this.progress = options.progress\n    this.requestType = options.requestType\n\n    this.thread = options.chunk.thread\n    this.chunkSize = options.chunk.chunkSize * 1024\n\n    // 携带参数KEY\n    this.carryParamName = {\n      typeName: options.carryTypeName,\n      fileNameName: options.carryFileNameName,\n      relativePathName: options.carryRelativePathName,\n      chunkSizeName: options.chunk.carryChunkSizeName,\n      currentChunkSizeName: options.chunk.carryCurrentChunkSizeName,\n      totalSizeName: options.chunk.carryTotalSizeName,\n      chunkIndexName: options.chunk.carryChunkIndexName,\n      totalChunksName: options.chunk.carryTotalChunksName,\n      identifierName: options.chunk.carryIdentifierName\n    }\n\n  }\n\n  /**\n   * 返回公共参数\n   * @param totalSize 文件总大小\n   * @param chunkSize 分块大小\n   * @param currentChunkSize  当前分块大小\n   * @param chunkIndex  当前分块index\n   * @param totalChunks 分块总量\n   * @param identifier  文件唯一标识\n   * @private\n   */\n  _getCommonArguments(options) {\n    let data = {}\n    data[this.carryParamName.typeName] = this.file.type\n    data[this.carryParamName.fileNameName] = this.file.name\n    data[this.carryParamName.relativePathName] = this.file.relativePath\n    data[this.carryParamName.totalSizeName] = this.file.size\n    data[this.carryParamName.chunkSizeName] = options.chunkSize\n    data[this.carryParamName.currentChunkSizeName] = options.currentChunkSize\n    data[this.carryParamName.chunkIndexName] = options.chunkIndex\n    data[this.carryParamName.totalChunksName] = options.totalChunks\n    data[this.carryParamName.identifierName] = this.file.identifier\n    return data\n  }\n\n\n  send() {\n    if (this.file.uploading) {\n      return\n    }\n    // 分块上传\n    if (this.chunkSize && this.file.size > this.chunkSize) {\n      return this._chunkUploadSend()\n    }\n    return this._entiretyUpload()\n  }\n\n  get requestOptions() {\n    return {\n      action: this.action,\n      method: this.method,\n      headers: this.headers\n    }\n  }\n\n  _setBodyFields(formData, data) {\n    Object.keys(data).forEach(key => formData.append(key, data[key]))\n    return formData\n  }\n\n  /**\n   * 整体上传\n   * @returns {Promise<T>}\n   * @private\n   */\n  _entiretyUpload() {\n    let options = this.requestOptions\n    if (this.progress) {\n      options.progress = (event) => {\n        if (event.lengthComputable) {\n          this.file.uploadPercent = Math.round(event.loaded * 100 / event.total)\n        } else {\n          this.file.uploadPercent = 0\n        }\n      }\n    }\n\n    let sendUpload = () => {\n      this.file.uploading = 1\n      return request(options).then((xhr, event) => {\n        this.file.uploading = 2\n        this.file.xhr = xhr\n        this.file.event = event\n        return this.file\n      }).catch(event => {\n        if (this.file.retries) {\n          --this.file.retries\n          this.file.uploading = 0\n          this.send()\n        } else {\n          this.file.event = event\n          this.file.uploading = -1\n          return this.file\n        }\n      })\n    }\n\n    let params = Object.assign({},\n      // 非分块上传时,公共参数 块大小,当前块大小都是文件大小,config:1,总块数:1\n      this._getCommonArguments({\n        chunkSize: this.file.size,\n        currentChunkSize: this.file.size,\n        chunkIndex: 1,\n        totalChunks: 1\n      }),\n      this.data)\n\n    if (this.requestType === 'octet') {\n      options.query = params\n      return new Promise(resolve => {\n        let fr = new FileReader()\n        fr.onload = () => {\n          options.data = fr.result\n          resolve(sendUpload())\n        }\n        fr.readAsDataURL(this.file.file)\n      })\n    } else {\n      params[this.file.name] = this.file.file\n      options.data = this._setBodyFields(new FormData(), params)\n      return sendUpload()\n    }\n  }\n\n  _createChunkOptions(blob, index, start, end) {\n    let options = Object.assign({}, this.requestOptions)\n    if (this.progress) {\n      options.progress = (event) => {\n        if (event.lengthComputable) {\n          let num = this._filterChunkList(status.SUCCESS).length\n          this.file.uploadPercent = Math.floor(100 / this.chunks.length * num) + Math.floor(event.loaded * 100 / this.file.size)\n        }\n      }\n    }\n\n    let params = Object.assign(\n      this._getCommonArguments({\n        chunkSize: this.chunkSize,\n        currentChunkSize: blob.size,\n        chunkIndex: index + 1,\n        totalChunks: 1\n      }),\n      this.data, {\n        start: start,\n        end: end\n      })\n\n    if (this.requestType === 'octet') {\n      options.query = params\n      options.data = blob\n    } else {\n      params[this.file.name] = blob\n      options.data = this._setBodyFields(new FormData(), params)\n    }\n\n    return options\n  }\n\n  _createChunks() {\n    this.chunks = []\n\n    let index = 0\n    let start = 0\n    let end = this.chunkSize\n\n    while (start < this.file.size) {\n      let _blob = this.file.file.slice(start, end)\n      let chunk = {\n        index: index,\n        blob: _blob,\n        startOffset: start,\n        uploading: status.NOT_START,\n        retries: this.file.maxRetries\n      }\n\n      chunk.options = this._createChunkOptions(chunk.blob, index, start, end)\n      this.chunks.push(chunk)\n      index++\n      start = end\n      end = start + this.chunkSize\n    }\n    let _self = this\n    this.chunks.forEach(chunk => {\n      chunk.total = index\n      if (_self.requestType === 'octet') {\n        chunk.options.query[_self.carryParamName.totalChunksName] = index\n      } else {\n        chunk.options.data.append(_self.carryParamName.totalChunksName, index)\n      }\n    })\n  }\n\n  _setFileUploadResult(chunk, event, xhr) {\n    if (!this.file.chunk) {\n      this.file.chunk = {xhr: {}, event: {}}\n    }\n    if (xhr) {\n      this.file.chunk.xhr[chunk.index] = xhr\n    }\n    if (event) {\n      this.file.chunk.event[chunk.index] = event\n    }\n    if (Object.keys(this.file.chunk.xhr).length === chunk.total) {\n      this.file.uploading = status.SUCCESS\n    }\n  }\n\n  _sendChunk(chunk) {\n    if (chunk.uploading) {\n      return\n    }\n    chunk.uploading = status.UPLOADING\n    return request(chunk.options).then((xhr, event) => {\n      chunk.uploading = status.SUCCESS\n\n      this._setFileUploadResult(chunk, event, xhr)\n    }).catch(event => {\n      if (chunk.retries) {\n        --chunk.retries\n        chunk.uploading = status.NOT_START\n        this._sendChunk(chunk)\n      } else {\n        chunk.uploading = status.ERROR\n        this.file.uploading = status.ERROR\n        this.file.uploadPercent = 0\n        this._setFileUploadResult(chunk, event)\n      }\n    })\n  }\n\n  /**\n   * 过滤chunk返回对应列表\n   * @param state 对应chunk对象的uploading字段\n   * @returns {Array}\n   * @private\n   */\n  _filterChunkList(state) {\n    let list = []\n    // 查询未上传的chunk时检查文件有没有被标记为失败\n    if (state === 0 && this.file.uploading < 0) {\n      return list\n    }\n    this.chunks.forEach(chunk => {\n      if (chunk.uploading === state) {\n        list.push(chunk)\n      }\n    })\n    return list\n  }\n\n  _sendChunkQueue() {\n    return new Promise(resolve => {\n      let recursive = () => {\n        let newChunkList = this._filterChunkList(status.NOT_START)\n        if (!newChunkList.length) {\n          resolve(this.file)\n          return\n        }\n        let threadCount = newChunkList.length > this.thread ? this.thread : newChunkList.length\n        threadCount -= this._filterChunkList(status.UPLOADING)\n        if (threadCount <= 0) {\n          return\n        }\n        for (let i = 0; i < threadCount; i++) {\n          this._sendChunk(newChunkList[i]).then(() => {\n            let num = this._filterChunkList(status.SUCCESS).length\n            if (num === this.chunks.length) {\n              this.file.uploadPercent = 100\n              return\n            }\n            this.file.uploadPercent = Math.floor(100 / this.chunks.length * num)\n            recursive()\n          }).catch(() => recursive())\n        }\n      }\n      recursive()\n    })\n  }\n\n  _chunkUploadSend() {\n    this._createChunks()\n    this.file.uploading = status.UPLOADING\n    return this._sendChunkQueue()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/upload.js","const _generateAction = (action, query) => {\n  if (query) {\n    let queryArray = []\n    Object.keys(query).forEach(key => {\n      queryArray.push([encodeURIComponent(key), encodeURIComponent(query[key])].join('='))\n    })\n    if (queryArray.length) {\n      action += action.match('\\\\?') ? '&' : '?' + queryArray.join('&')\n    }\n  }\n  return action\n}\n\nexport default function (options) {\n  return new Promise((resolve, reject) => {\n    let xhr = new XMLHttpRequest()\n    let action = options.query ? _generateAction(options.action, options.query) : options.action\n\n    if (options.progress) {\n      xhr.upload.addEventListener('progress', options.progress, false)\n    }\n\n    let doneHandler = (event) => {\n      xhr.status >= 200 && xhr.status < 300 ? resolve(xhr, event) : reject(event)\n    }\n\n    xhr.addEventListener('load', doneHandler, false)\n    xhr.addEventListener('error', doneHandler, false)\n    xhr.addEventListener('abort', doneHandler, false)\n    xhr.addEventListener('timeout', doneHandler, false)\n\n    xhr.open(options.method, action)\n\n    Object.keys(options.headers).forEach(key => xhr.setRequestHeader(key, options.headers[key]))\n    xhr.send(options.data)\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js","/**\n * 上传出错\n * @type {number}\n */\nexport const ERROR = -1\n/**\n * 未开始上传\n * @type {number}\n */\nexport const NOT_START = 0\n/**\n * 上传中\n * @type {number}\n */\nexport const UPLOADING = 1\n/**\n * 上传成功\n * @type {number}\n */\nexport const SUCCESS = 2\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"className\"},[_vm._t(\"default\"),_vm._v(\" \"),_c('input-file')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4596ff92\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/lib/FileUpload.vue\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}