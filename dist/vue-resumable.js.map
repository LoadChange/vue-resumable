{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-resumable.js","webpack:///webpack/bootstrap 2d8900797685b8fae57b","webpack:///./node_modules/vue-loader/lib/component-normalizer.js","webpack:///src/lib/FileUpload.vue","webpack:///src/lib/InputFile.vue","webpack:///./src/lib/index.js","webpack:///./src/lib/FileUpload.vue","webpack:///./src/lib/InputFile.vue","webpack:///./src/lib/InputFile.vue?89be","webpack:///./src/utils/features.js","webpack:///./src/entity/file.js","webpack:///./src/utils/request.js","webpack:///./src/lib/FileUpload.vue?ab64"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","rawScriptExports","compiledTemplate","functionalTemplate","injectStyles","scopeId","moduleIdentifier","esModule","scriptExports","type","default","options","render","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","existing","beforeCreate","_injectStyles","h","concat","__webpack_exports__","_toConsumableArray","arr","Array","isArray","arr2","length","from","__WEBPACK_IMPORTED_MODULE_0__InputFile_vue__","__WEBPACK_IMPORTED_MODULE_1__utils_features__","__WEBPACK_IMPORTED_MODULE_2__entity_file__","__WEBPACK_IMPORTED_MODULE_3__utils_request__","components","InputFile","props","inputId","String","accept","capture","multiple","Boolean","directory","postAction","headers","data","timeout","Number","promptly","thread","chunkSize","maxRetries","files","features","uploading","watch","newFileList","upload","methods","addInputFile","el","file","push","$emit","clear","forEach","_sendRequest","parameters","Function","bind","apply","send","force","arguments","undefined","total","_self","fileThread","then","catch","uploadPercent","change","e","$destroy","$parent","target","constructor","$el","value","__WEBPACK_IMPORTED_MODULE_0__FileUpload__","VueResumable","install","Vue","component","window","use","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_47a8dfba_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__","normalizeComponent","Component","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__","_vm","_h","$createElement","_c","attrs","id","webkitdirectory","html5","on","esExports","input","document","createElement","FormData","drop","ondrop","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","descriptor","writable","key","protoProps","staticProps","File","size","relativePath","webkitRelativePath","lastModified","lastModifiedDate","test","url","getObjectURL","createObjectURL","URL","webkitURL","request","action","method","responseType","xhr","XMLHttpRequest","_body","_this","keys","setRequestHeader","_this2","append","_this3","addEventListener","response","reject","_this4","fileSize","_chunkUploadSend","_setRequestHeader","_setCommonBodyFields","Promise","resolve","event","lengthComputable","Math","round","loaded","status","_bindErrorEvent","open","blob","index","start","end","_this5","chunks","_blob","slice","chunk","startOffset","retries","formData","_createChunkFormData","console","log","_this6","accident","completeChunkList","newChunkList","_getNewChunkList","threadCount","_sendChunk","_getCompleteChunkList","_sendChunkQueue","_createChunks","staticClass","_t","_v"],"mappings":"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","file":"vue-resumable.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"VueResumable\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueResumable\"] = factory();\n\telse\n\t\troot[\"VueResumable\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"VueResumable\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VueResumable\"] = factory();\n\telse\n\t\troot[\"VueResumable\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__InputFile_vue__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_features__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__entity_file__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_request__ = __webpack_require__(9);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'vue-resumable',\n\n  components: {\n    InputFile: __WEBPACK_IMPORTED_MODULE_0__InputFile_vue__[\"a\" /* default */]\n  },\n  props: {\n    inputId: {\n      type: String\n    },\n    name: {\n      type: String,\n      default: 'file'\n    },\n    accept: {\n      type: String\n    },\n    capture: {},\n    multiple: {\n      type: Boolean\n    },\n    directory: {\n      type: Boolean\n    },\n    postAction: {\n      type: String\n    },\n    headers: {\n      type: Object,\n      default: Object\n    },\n    data: {\n      type: Object,\n      default: Object\n    },\n    timeout: {\n      type: Number,\n      default: 0\n    },\n    // 是否对新增队列的文件 立即上传\n    promptly: {\n      type: Boolean,\n      default: false\n    },\n    // 上传进程数\n    thread: {\n      type: Number,\n      default: 1\n    },\n    // 分块大小 单位 0为不开启\n    chunkSize: {\n      type: Number,\n      default: 0\n    },\n    // 上传失败或遇到异常 重试次数\n    maxRetries: {\n      type: Number,\n      default: 3\n    }\n  },\n  data: function data() {\n    return {\n      files: [],\n      features: __WEBPACK_IMPORTED_MODULE_1__utils_features__[\"a\" /* default */],\n      uploading: 0\n    };\n  },\n\n  watch: {\n    files: function files() {\n      if (!this.promptly) {\n        return;\n      }\n      var newFileList = this.newFileList();\n      if (newFileList.length) {\n        this.upload();\n      }\n    }\n  },\n  methods: {\n    /**\n     * file input change event\n     * @param file\n     */\n    addInputFile: function addInputFile(el) {\n      if (el.files && el.files.length) {\n        for (var i = 0; i < el.files.length; i++) {\n          var file = el.files[i];\n          this.files.push(new __WEBPACK_IMPORTED_MODULE_2__entity_file__[\"a\" /* default */](file, this.maxRetries));\n        }\n      }\n      this.$emit('change', this.files);\n    },\n    clear: function clear() {\n      this.files = [];\n    },\n    newFileList: function newFileList() {\n      var newFileList = [];\n      this.files.forEach(function (file) {\n        if (!file.uploading) {\n          newFileList.push(file);\n        }\n      });\n      return newFileList;\n    },\n    _sendRequest: function _sendRequest(file) {\n      file.uploading = 1;\n      var parameters = [this.postAction, this.data, file, this.headers];\n      if (this.chunkSize) {\n        parameters = [].concat(_toConsumableArray(parameters), [this.chunkSize, this.thread]);\n      }\n      var request = new (Function.prototype.bind.apply(__WEBPACK_IMPORTED_MODULE_3__utils_request__[\"a\" /* default */], [null].concat(_toConsumableArray(parameters))))();\n      return request.send();\n    },\n    upload: function upload() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (this.uploading && !force) {\n        return;\n      }\n      var newFileList = this.newFileList();\n      var total = newFileList.length;\n      if (!total) {\n        return;\n      }\n      var _self = this;\n      if (this.thread >= total) {\n        newFileList.forEach(function (file) {\n          _self._sendRequest(file);\n        });\n        return;\n      }\n      var fileThread = !this.chunkSize ? this.thread : 1;\n      for (var i = 0; i < fileThread; i++) {\n        var file = newFileList[i];\n        if (file.uploading) {\n          continue;\n        }\n        _self._sendRequest(file).then(function () {\n          _self.upload(true);\n        }).catch(function (file) {\n          file.uploadPercent = 0;\n          if (file.maxRetries) {\n            file.uploading = 0;\n            --file.maxRetries;\n          } else {\n            file.uploading = -1;\n          }\n          _self.upload(true);\n        });\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  methods: {\n    change: function change(e) {\n      this.$destroy();\n      this.$parent.addInputFile(e.target);\n      // eslint-disable-next-line\n      new this.constructor({\n        parent: this.$parent,\n        el: this.$el\n      });\n    }\n  }\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__FileUpload__ = __webpack_require__(4);\n\n\nvar VueResumable = {\n  install: function install(Vue, options) {\n    Vue.component(__WEBPACK_IMPORTED_MODULE_0__FileUpload__[\"a\" /* default */].name, __WEBPACK_IMPORTED_MODULE_0__FileUpload__[\"a\" /* default */]);\n  }\n};\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VueResumable);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (VueResumable);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__ = __webpack_require__(1);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_47a8dfba_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__ = __webpack_require__(10);\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_FileUpload_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_47a8dfba_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_FileUpload_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__ = __webpack_require__(2);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__ = __webpack_require__(6);\nvar normalizeComponent = __webpack_require__(0)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_InputFile_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_648e085f_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_InputFile_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"file\",\"name\":_vm.$parent.name,\"id\":_vm.$parent.inputId || _vm.$parent.name,\"accept\":_vm.$parent.accept,\"capture\":_vm.$parent.capture,\"webkitdirectory\":_vm.$parent.directory && _vm.$parent.features.directory,\"directory\":_vm.$parent.directory && _vm.$parent.features.directory,\"multiple\":_vm.$parent.multiple && _vm.$parent.features.html5},on:{\"change\":_vm.change}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (new function () {\n  var input = document.createElement('input');\n  input.type = 'file';\n  input.multiple = true;\n\n  var features = {};\n  features.html5 = window.FormData && input.files && true;\n\n  if (features.html5) {\n    features.directory = typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean';\n    features.drop = typeof input.ondrop !== 'undefined';\n  }\n\n  return features;\n}());\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar File = function () {\n  function File(file, maxRetries) {\n    _classCallCheck(this, File);\n\n    this.file = file;\n    this.name = file.name;\n    this.size = file.size;\n    this.type = file.type;\n    this.relativePath = file.webkitRelativePath || file.relativePath || '';\n    this.lastModified = file.lastModified;\n    this.lastModifiedDate = file.lastModifiedDate;\n    this.uploadPercent = 0;\n    this.uploading = 0; // -1:上传失败 0:未上传 1:上传中 2:上传成功\n    this.maxRetries = maxRetries || 1;\n\n    if (/^image\\/*/.test(file.type)) {\n      this.url = this.getObjectURL(file);\n    }\n  }\n\n  _createClass(File, [{\n    key: 'getObjectURL',\n    value: function getObjectURL(file) {\n      var url = null;\n      if (window.createObjectURL != undefined) {\n        url = window.createObjectURL(file);\n      } else if (window.URL != undefined) {\n        url = window.URL.createObjectURL(file);\n      } else if (window.webkitURL != undefined) {\n        url = window.webkitURL.createObjectURL(file);\n      }\n      return url;\n    }\n  }]);\n\n  return File;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (File);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar request = function () {\n  function request(action, data, file, headers, chunkSize) {\n    var thread = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 1;\n    var method = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'POST';\n    var responseType = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 'json';\n\n    _classCallCheck(this, request);\n\n    this.xhr = new XMLHttpRequest();\n    this.xhr.responseType = responseType;\n    this.method = method;\n    this.action = action;\n    this.headers = headers;\n    this.data = data;\n    this.file = file;\n    this.chunkSize = chunkSize * 1024;\n    this.thread = thread;\n    this._body = new FormData();\n  }\n\n  _createClass(request, [{\n    key: '_setRequestHeader',\n    value: function _setRequestHeader() {\n      var _this = this;\n\n      if (this.headers) {\n        Object.keys(this.headers).forEach(function (name) {\n          return _this.xhr.setRequestHeader(value, _this.headers[name]);\n        });\n      }\n    }\n  }, {\n    key: '_setCommonBodyFields',\n    value: function _setCommonBodyFields() {\n      var _this2 = this;\n\n      if (this.data) {\n        Object.keys(this.data).forEach(function (key) {\n          return _this2._body.append(key, _this2.data[key]);\n        });\n      }\n    }\n  }, {\n    key: '_bindErrorEvent',\n    value: function _bindErrorEvent() {\n      var _this3 = this;\n\n      this.xhr.addEventListener(\"error\", function () {\n        _this3.file.response = _this3.xhr.response;\n        reject(_this3.file);\n      }, false);\n      this.xhr.addEventListener(\"abort\", function () {\n        _this3.file.response = _this3.xhr.response;\n        reject(_this3.file);\n      }, false);\n    }\n  }, {\n    key: 'send',\n    value: function send() {\n      var _this4 = this;\n\n      if (this.chunkSize && this.fileSize > this.chunkSize) {\n        return this._chunkUploadSend();\n      }\n      this._setRequestHeader();\n      this._setCommonBodyFields();\n      return new Promise(function (resolve, reject) {\n\n        _this4._body.append(_this4.file.name, _this4.file.file);\n\n        _this4.xhr.upload.addEventListener('progress', function (event) {\n          if (event.lengthComputable) {\n            _this4.file.uploadPercent = Math.round(event.loaded * 100 / event.total);\n          } else {\n            _this4.file.uploadPercent = 0;\n          }\n        }, false);\n\n        _this4.xhr.addEventListener(\"load\", function () {\n          if (_this4.xhr.status >= 200 && _this4.xhr.status < 300) {\n            _this4.file.uploading = 2;\n            _this4.file.response = _this4.xhr.response;\n            resolve(_this4.file);\n          } else {\n            reject(_this4.file);\n          }\n        }, false);\n\n        _this4._bindErrorEvent();\n\n        _this4.xhr.open(_this4.method, _this4.action, true);\n        _this4.xhr.send(_this4._body);\n      }).catch(function (file) {\n        if (file.maxRetries) {\n          file.maxRetries = --file.maxRetries;\n          _this4.send();\n        }\n      });\n    }\n  }, {\n    key: '_createChunkFormData',\n    value: function _createChunkFormData(blob, index, start, end) {\n      var _this5 = this;\n\n      var _body = new FormData();\n      Object.keys(this.data).forEach(function (key) {\n        return _body.append(key, _this5.data[key]);\n      });\n      _body.append(this.file.name, blob);\n      _body.append('index', index);\n      _body.append('start', start);\n      _body.append('end', end);\n      return _body;\n    }\n  }, {\n    key: '_createChunks',\n    value: function _createChunks() {\n      this.chunks = [];\n\n      var index = 0;\n      var start = 0;\n      var end = this.chunkSize;\n\n      while (start < this.fileSize) {\n        var _blob = this.file.file.slice(start, end);\n        var chunk = {\n          index: index,\n          blob: _blob,\n          startOffset: start,\n          uploading: 0,\n          retries: this.file.maxRetries\n        };\n        chunk.formData = this._createChunkFormData(chunk.blob, index, start, end);\n        this.chunks.push(chunk);\n        index++;\n        start = end;\n        end = start + this.chunkSize;\n      }\n      console.log(this.chunks);\n    }\n  }, {\n    key: '_sendChunk',\n    value: function _sendChunk(chunk) {\n      var _this6 = this;\n\n      chunk.uploading = 1;\n      var _self = this;\n      return new Promise(function (resolve, reject) {\n        _self.xhr = new XMLHttpRequest();\n        _self.xhr.addEventListener('load', function () {\n          if (_self.xhr.status >= 200 && _self.xhr.status < 300) {\n            chunk.uploading = 2;\n            resolve(chunk);\n          }\n        });\n\n        var accident = function accident() {\n          chunk.uploading = -1;\n          reject(chunk);\n        };\n\n        _self.xhr.addEventListener('error', accident, false);\n        _self.xhr.addEventListener('abort', accident, false);\n\n        _self.xhr.open(_this6.method, _this6.action, true);\n        _self.xhr.send(chunk.formData);\n      });\n    }\n  }, {\n    key: '_getCompleteChunkList',\n    value: function _getCompleteChunkList() {\n      var completeChunkList = [];\n      this.chunks.forEach(function (chunk) {\n        if (chunk.uploading === 2) {\n          completeChunkList.push(chunk);\n        }\n      });\n      return completeChunkList;\n    }\n  }, {\n    key: '_getNewChunkList',\n    value: function _getNewChunkList() {\n      var newChunkList = [];\n      this.chunks.forEach(function (chunk) {\n        if (!chunk.uploading) {\n          newChunkList.push(chunk);\n        }\n      });\n      return newChunkList;\n    }\n  }, {\n    key: '_sendChunkQueue',\n    value: function _sendChunkQueue() {\n      var newChunkList = this._getNewChunkList();\n      var _self = this;\n      var threadCount = newChunkList.length > this.thread ? this.thread : newChunkList.length;\n      for (var i = 0; i < threadCount; i++) {\n        this._sendChunk(newChunkList[i]).then(function () {\n          _self.file.uploadPercent = Math.round(_self._getCompleteChunkList().length * 100 / _self.chunks.length);\n          _self._sendChunkQueue();\n        }).catch(function (chunk) {\n          if (chunk.retries) {\n            --chunk.retries;\n            chunk.uploading = 0;\n            _self._sendChunkQueue();\n          } else {\n            _self.file.uploadPercent = 0;\n            _self.file.uploading = -1;\n          }\n        });\n      }\n    }\n  }, {\n    key: '_chunkUploadSend',\n    value: function _chunkUploadSend() {\n      this._createChunks();\n      this._sendChunkQueue();\n    }\n  }, {\n    key: 'fileSize',\n    get: function get() {\n      return this.file.size;\n    }\n  }]);\n\n  return request;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (request);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"className\"},[_vm._t(\"default\"),_vm._v(\" \"),_c('input-file')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// vue-resumable.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2d8900797685b8fae57b","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file.\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function normalizeComponent (\n  rawScriptExports,\n  compiledTemplate,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */\n) {\n  var esModule\n  var scriptExports = rawScriptExports = rawScriptExports || {}\n\n  // ES6 modules interop\n  var type = typeof rawScriptExports.default\n  if (type === 'object' || type === 'function') {\n    esModule = rawScriptExports\n    scriptExports = rawScriptExports.default\n  }\n\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (compiledTemplate) {\n    options.render = compiledTemplate.render\n    options.staticRenderFns = compiledTemplate.staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = injectStyles\n  }\n\n  if (hook) {\n    var functional = options.functional\n    var existing = functional\n      ? options.render\n      : options.beforeCreate\n\n    if (!functional) {\n      // inject component registration as beforeCreate hook\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    } else {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functioal component in vue file\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return existing(h, context)\n      }\n    }\n  }\n\n  return {\n    esModule: esModule,\n    exports: scriptExports,\n    options: options\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/component-normalizer.js\n// module id = 0\n// module chunks = 0","<template>\n  <label class=\"className\">\n    <slot></slot>\n    <input-file></input-file>\n  </label>\n</template>\n<script>\n  import InputFile from './InputFile.vue'\n  import features from '../utils/features'\n  import File from '../entity/file'\n  import Request from '../utils/request'\n\n  export default {\n    name: 'vue-resumable',\n\n    components: {\n      InputFile,\n    },\n    props: {\n      inputId: {\n        type: String,\n      },\n      name: {\n        type: String,\n        default: 'file',\n      },\n      accept: {\n        type: String,\n      },\n      capture: {},\n      multiple: {\n        type: Boolean,\n      },\n      directory: {\n        type: Boolean,\n      },\n      postAction: {\n        type: String,\n      },\n      headers: {\n        type: Object,\n        default: Object,\n      },\n      data: {\n        type: Object,\n        default: Object,\n      },\n      timeout: {\n        type: Number,\n        default: 0,\n      },\n      // 是否对新增队列的文件 立即上传\n      promptly: {\n        type: Boolean,\n        default: false,\n      },\n      // 上传进程数\n      thread: {\n        type: Number,\n        default: 1,\n      },\n      // 分块大小 单位 0为不开启\n      chunkSize: {\n        type: Number,\n        default: 0\n      },\n      // 上传失败或遇到异常 重试次数\n      maxRetries: {\n        type: Number,\n        default: 3\n      }\n    },\n    data() {\n      return {\n        files: [],\n        features: features,\n        uploading: 0\n      }\n    },\n    watch: {\n      files: function () {\n        if (!this.promptly) {\n          return\n        }\n        let newFileList = this.newFileList()\n        if (newFileList.length) {\n          this.upload()\n        }\n      }\n    },\n    methods: {\n      /**\n       * file input change event\n       * @param file\n       */\n      addInputFile: function (el) {\n        if (el.files && el.files.length) {\n          for (let i = 0; i < el.files.length; i++) {\n            let file = el.files[i]\n            this.files.push(new File(file, this.maxRetries))\n          }\n        }\n        this.$emit('change', this.files)\n      },\n      clear: function () {\n        this.files = []\n      },\n      newFileList: function () {\n        let newFileList = []\n        this.files.forEach(file => {\n          if (!file.uploading) {\n            newFileList.push(file)\n          }\n        })\n        return newFileList\n      },\n      _sendRequest: function (file) {\n        file.uploading = 1\n        let parameters = [this.postAction, this.data, file, this.headers]\n        if (this.chunkSize) {\n          parameters = [...parameters, this.chunkSize, this.thread]\n        }\n        let request = new Request(...parameters)\n        return request.send()\n      },\n      upload: function (force = false) {\n        if (this.uploading && !force) {\n          return\n        }\n        let newFileList = this.newFileList()\n        let total = newFileList.length\n        if (!total) {\n          return\n        }\n        let _self = this\n        if (this.thread >= total) {\n          newFileList.forEach(file => {\n            _self._sendRequest(file)\n          })\n          return\n        }\n        let fileThread = !this.chunkSize ? this.thread : 1\n        for (let i = 0; i < fileThread; i++) {\n          let file = newFileList[i]\n          if (file.uploading) {\n            continue\n          }\n          _self._sendRequest(file).then(() => {\n            _self.upload(true)\n          }).catch((file) => {\n            file.uploadPercent = 0\n            if (file.maxRetries) {\n              file.uploading = 0\n              --file.maxRetries\n            } else {\n              file.uploading = -1\n            }\n            _self.upload(true)\n          })\n        }\n      }\n    }\n  }\n</script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/lib/FileUpload.vue","<template>\n  <input\n    type=\"file\"\n    :name=\"$parent.name\"\n    :id=\"$parent.inputId || $parent.name\"\n    :accept=\"$parent.accept\"\n    :capture=\"$parent.capture\"\n    @change=\"change\"\n    :webkitdirectory=\"$parent.directory && $parent.features.directory\"\n    :directory=\"$parent.directory && $parent.features.directory\"\n    :multiple=\"$parent.multiple && $parent.features.html5\"\n  />\n</template>\n<script>\n  export default {\n    methods: {\n      change(e) {\n        this.$destroy()\n        this.$parent.addInputFile(e.target)\n        // eslint-disable-next-line\n        new this.constructor({\n          parent: this.$parent,\n          el: this.$el,\n        })\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/lib/InputFile.vue","import FileUpload from './FileUpload'\n\nconst VueResumable = {\n  install(Vue, options) {\n    Vue.component(FileUpload.name, FileUpload)\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(VueResumable)\n}\n\nexport default VueResumable\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/index.js","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-47a8dfba\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FileUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/FileUpload.vue\n// module id = 4\n// module chunks = 0","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-648e085f\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./InputFile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lib/InputFile.vue\n// module id = 5\n// module chunks = 0","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"file\",\"name\":_vm.$parent.name,\"id\":_vm.$parent.inputId || _vm.$parent.name,\"accept\":_vm.$parent.accept,\"capture\":_vm.$parent.capture,\"webkitdirectory\":_vm.$parent.directory && _vm.$parent.features.directory,\"directory\":_vm.$parent.directory && _vm.$parent.features.directory,\"multiple\":_vm.$parent.multiple && _vm.$parent.features.html5},on:{\"change\":_vm.change}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-648e085f\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/lib/InputFile.vue\n// module id = 6\n// module chunks = 0","export default new function () {\n  let input = document.createElement('input')\n  input.type = 'file'\n  input.multiple = true\n\n  let features = {}\n  features.html5 = window.FormData && input.files && true\n\n  if (features.html5) {\n    features.directory = typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean'\n    features.drop = typeof input.ondrop !== 'undefined'\n  }\n\n  return features\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/features.js","export default class File {\n  constructor(file, maxRetries) {\n    this.file = file\n    this.name = file.name\n    this.size = file.size\n    this.type = file.type\n    this.relativePath = file.webkitRelativePath || file.relativePath || ''\n    this.lastModified = file.lastModified\n    this.lastModifiedDate = file.lastModifiedDate\n    this.uploadPercent = 0\n    this.uploading = 0 // -1:上传失败 0:未上传 1:上传中 2:上传成功\n    this.maxRetries = maxRetries || 1\n\n    if (/^image\\/*/.test(file.type)) {\n      this.url = this.getObjectURL(file)\n    }\n  }\n\n  getObjectURL(file) {\n    let url = null\n    if (window.createObjectURL != undefined) {\n      url = window.createObjectURL(file)\n    } else if (window.URL != undefined) {\n      url = window.URL.createObjectURL(file)\n    } else if (window.webkitURL != undefined) {\n      url = window.webkitURL.createObjectURL(file)\n    }\n    return url\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/file.js","export default class request {\n  constructor(action, data, file, headers, chunkSize, thread = 1, method = 'POST', responseType = 'json') {\n    this.xhr = new XMLHttpRequest()\n    this.xhr.responseType = responseType\n    this.method = method\n    this.action = action\n    this.headers = headers\n    this.data = data\n    this.file = file\n    this.chunkSize = chunkSize * 1024\n    this.thread = thread\n    this._body = new FormData()\n  }\n\n  get fileSize() {\n    return this.file.size\n  }\n\n  _setRequestHeader() {\n    if (this.headers) {\n      Object.keys(this.headers).forEach(name => this.xhr.setRequestHeader(value, this.headers[name]))\n    }\n  }\n\n  _setCommonBodyFields() {\n    if (this.data) {\n      Object.keys(this.data).forEach(key => this._body.append(key, this.data[key]))\n    }\n  }\n\n  _bindErrorEvent() {\n    this.xhr.addEventListener(\"error\", () => {\n      this.file.response = this.xhr.response\n      reject(this.file)\n    }, false)\n    this.xhr.addEventListener(\"abort\", () => {\n      this.file.response = this.xhr.response\n      reject(this.file)\n    }, false)\n  }\n\n  send() {\n    if (this.chunkSize && this.fileSize > this.chunkSize) {\n      return this._chunkUploadSend()\n    }\n    this._setRequestHeader()\n    this._setCommonBodyFields()\n    return new Promise((resolve, reject) => {\n\n      this._body.append(this.file.name, this.file.file)\n\n      this.xhr.upload.addEventListener('progress', (event) => {\n        if (event.lengthComputable) {\n          this.file.uploadPercent = Math.round(event.loaded * 100 / event.total)\n        } else {\n          this.file.uploadPercent = 0\n        }\n      }, false)\n\n      this.xhr.addEventListener(\"load\", () => {\n        if (this.xhr.status >= 200 && this.xhr.status < 300) {\n          this.file.uploading = 2\n          this.file.response = this.xhr.response\n          resolve(this.file)\n        } else {\n          reject(this.file)\n        }\n      }, false)\n\n      this._bindErrorEvent()\n\n      this.xhr.open(this.method, this.action, true)\n      this.xhr.send(this._body)\n    }).catch(file => {\n      if (file.maxRetries) {\n        file.maxRetries = --file.maxRetries\n        this.send()\n      }\n    })\n  }\n\n  _createChunkFormData(blob, index, start, end) {\n    let _body = new FormData()\n    Object.keys(this.data).forEach(key => _body.append(key, this.data[key]))\n    _body.append(this.file.name, blob)\n    _body.append('index', index)\n    _body.append('start', start)\n    _body.append('end', end)\n    return _body\n  }\n\n  _createChunks() {\n    this.chunks = []\n\n    let index = 0\n    let start = 0\n    let end = this.chunkSize\n\n    while (start < this.fileSize) {\n      let _blob = this.file.file.slice(start, end)\n      let chunk = {\n        index: index,\n        blob: _blob,\n        startOffset: start,\n        uploading: 0,\n        retries: this.file.maxRetries\n      }\n      chunk.formData = this._createChunkFormData(chunk.blob, index, start, end)\n      this.chunks.push(chunk)\n      index++\n      start = end\n      end = start + this.chunkSize\n    }\n    console.log(this.chunks)\n  }\n\n  _sendChunk(chunk) {\n    chunk.uploading = 1\n    let _self = this\n    return new Promise((resolve, reject) => {\n      _self.xhr = new XMLHttpRequest()\n      _self.xhr.addEventListener('load', () => {\n        if (_self.xhr.status >= 200 && _self.xhr.status < 300) {\n          chunk.uploading = 2\n          resolve(chunk)\n        }\n      })\n\n      let accident = () => {\n        chunk.uploading = -1\n        reject(chunk)\n      }\n\n      _self.xhr.addEventListener('error', accident, false)\n      _self.xhr.addEventListener('abort', accident, false)\n\n      _self.xhr.open(this.method, this.action, true)\n      _self.xhr.send(chunk.formData)\n    })\n  }\n\n  _getCompleteChunkList() {\n    let completeChunkList = []\n    this.chunks.forEach(chunk => {\n      if (chunk.uploading === 2) {\n        completeChunkList.push(chunk)\n      }\n    })\n    return completeChunkList\n  }\n\n  _getNewChunkList() {\n    let newChunkList = []\n    this.chunks.forEach(chunk => {\n      if (!chunk.uploading) {\n        newChunkList.push(chunk)\n      }\n    })\n    return newChunkList\n  }\n\n  _sendChunkQueue() {\n    let newChunkList = this._getNewChunkList()\n    let _self = this\n    let threadCount = newChunkList.length > this.thread ? this.thread : newChunkList.length\n    for (let i = 0; i < threadCount; i++) {\n      this._sendChunk(newChunkList[i]).then(() => {\n        _self.file.uploadPercent = Math.round(_self._getCompleteChunkList().length * 100 / _self.chunks.length)\n        _self._sendChunkQueue()\n      }).catch(chunk => {\n        if (chunk.retries) {\n          --chunk.retries\n          chunk.uploading = 0\n          _self._sendChunkQueue()\n        } else {\n          _self.file.uploadPercent = 0\n          _self.file.uploading = -1\n        }\n      })\n    }\n  }\n\n  _chunkUploadSend() {\n    this._createChunks()\n    this._sendChunkQueue()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"className\"},[_vm._t(\"default\"),_vm._v(\" \"),_c('input-file')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-47a8dfba\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/lib/FileUpload.vue\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}